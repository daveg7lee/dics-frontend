(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[637],{1642:function(e,r,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/edit",function(){return n(4602)}])},1892:function(e,r,n){"use strict";var t=n(2010);n(6687);r.Z=function(e){var r=e.text,n=e.onClick,a=e.width;return(0,t.jsx)("button",{onClick:n,style:{width:a},className:"allCenter blueButton",children:r})}},4602:function(e,r,n){"use strict";n.r(r),n.d(r,{default:function(){return g}});var t=n(9884),a=n.n(t),i=n(2010),l=n(637),s=n(6373),o=n(6687),c=n(681),u=n(1892),d=n(8370),f=n(3417),m=n(509),p=function(e){var r=e.children,n=e.name;return(0,i.jsx)("div",{className:"flex justify-evenly px-4 mb-2",children:(0,i.jsxs)("div",{className:"flex flex-col items-center justify-center w-full mx-2",children:[(0,i.jsx)("label",{className:"mb-[5px] text-start w-full",children:n}),r]})})};function v(e,r){(null==r||r>e.length)&&(r=e.length);for(var n=0,t=new Array(r);n<r;n++)t[n]=e[n];return t}function w(e,r,n,t,a,i,l){try{var s=e[i](l),o=s.value}catch(c){return void n(c)}s.done?r(o):Promise.resolve(o).then(t,a)}function b(e){return function(){var r=this,n=arguments;return new Promise((function(t,a){var i=e.apply(r,n);function l(e){w(i,t,a,l,s,"next",e)}function s(e){w(i,t,a,l,s,"throw",e)}l(void 0)}))}}function h(e,r,n){return r in e?Object.defineProperty(e,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[r]=n,e}function y(e){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{},t=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(t=t.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),t.forEach((function(r){h(e,r,n[r])}))}return e}function x(e,r){return r=null!=r?r:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):function(e,r){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);r&&(t=t.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),n.push.apply(n,t)}return n}(Object(r)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})),e}function j(e,r){return function(e){if(Array.isArray(e))return e}(e)||function(e,r){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var t,a,i=[],l=!0,s=!1;try{for(n=n.call(e);!(l=(t=n.next()).done)&&(i.push(t.value),!r||i.length!==r);l=!0);}catch(o){s=!0,a=o}finally{try{l||null==n.return||n.return()}finally{if(s)throw a}}return i}}(e,r)||function(e,r){if(!e)return;if("string"===typeof e)return v(e,r);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return v(e,r)}(e,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function P(){var e,r,n=(e=["\n  mutation editProfile(\n    $email: String\n    $avatar: Upload\n    $bio: String\n    $oldPassword: String\n    $newPassword: String\n  ) {\n    editProfile(\n      email: $email\n      avatar: $avatar\n      bio: $bio\n      oldPassword: $oldPassword\n      newPassword: $newPassword\n    )\n  }\n"],r||(r=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(r)}})));return P=function(){return n},n}var O=(0,s.gql)(P()),g=function(){var e=(0,m.useRouter)(),r=(0,f.Z)(),n=r.data,t=r.loading,s=(0,d.cI)(),v=s.register,w=s.handleSubmit,h=s.setValue,P=(0,o.useState)(""),g=P[0],N=P[1],S=j((0,l.useMutation)(O),1)[0];(0,o.useEffect)((function(){var e,r;h("email",null===n||void 0===n||null===(e=n.me)||void 0===e?void 0:e.email),N(null===n||void 0===n||null===(r=n.me)||void 0===r?void 0:r.avatar)}),[n]);var _=function(){var r=b(a().mark((function r(n){var t,i,l,s,o;return a().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(t=n.target,i=j(t.files,1),l=i[0],(s=new FileReader).onloadend=function(){var e=s.result;e&&N(e.toString())},!l){r.next=10;break}return s.readAsDataURL(l),r.next=7,S({variables:{avatar:l}});case 7:o=r.sent,o.data.editProfile&&(c.Am.success("Profile Updated"),e.push("/"));case 10:case"end":return r.stop()}}),r)})));return function(e){return r.apply(this,arguments)}}(),k=function(){var e=b(a().mark((function e(r){var n,t,i,l;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.email,t=r.oldPassword,i=r.newPassword,e.next=3,S({variables:{email:n,oldPassword:t,newPassword:i}});case 3:l=e.sent,l.data.editProfile&&c.Am.success("Profile Updated");case 6:case"end":return e.stop()}}),e)})));return function(r){return e.apply(this,arguments)}}();return(0,i.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,i.jsx)("div",{className:"w-4/5 h-full",children:(0,i.jsxs)("div",{className:"md:flex",children:[(0,i.jsx)("div",{className:"w-[45%] h-full md:m-0 mb-2",children:(0,i.jsx)("h1",{className:"text-2xl font-semibold",children:"Account Information"})}),(0,i.jsxs)("form",{className:"w-full h-full p-4 border border-gray-300 rounded",onSubmit:w(k),children:[(0,i.jsx)("div",{className:"flex justify-evenly px-4 mb-2",children:(0,i.jsxs)("div",{className:"flex flex-col items-center justify-center w-full mx-2",children:[(0,i.jsx)("label",{className:"mb-[5px]",children:"Avatar"}),t?(0,i.jsx)("div",{className:"w-16 h-16 rounded-full animate-pulse bg-gray-300"}):(0,i.jsx)("img",{className:"w-16 h-16 rounded-full",src:g}),(0,i.jsx)("label",{className:"mb-[5px]",htmlFor:"file",style:{cursor:"pointer",display:"flex",justifyContent:"center",marginTop:"1rem"},children:"\ucc3e\uc544\ubcf4\uae30"}),(0,i.jsx)("input",{id:"file",onChange:_,type:"file",className:"hidden"})]})}),(0,i.jsx)(p,{name:"Email",children:(0,i.jsx)("input",x(y({},v("email",{required:!1})),{placeholder:"Email",className:"input"}))}),(0,i.jsx)(p,{name:"Old Password",children:(0,i.jsx)("input",x(y({},v("oldPassword",{required:!0})),{placeholder:"Old Password",className:"input"}))}),(0,i.jsx)(p,{name:"New Password",children:(0,i.jsx)("input",x(y({},v("newPassword",{required:!0})),{placeholder:"New Password",className:"input"}))}),(0,i.jsx)(u.Z,{text:"Save"})]})]})})})}},509:function(e,r,n){e.exports=n(691)}},function(e){e.O(0,[370,774,888,179],(function(){return r=1642,e(e.s=r);var r}));var r=e.O();_N_E=r}]);