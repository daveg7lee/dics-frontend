(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[863],{2942:function(e,r,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/upload",function(){return t(4806)}])},1892:function(e,r,t){"use strict";var n=t(2010);t(6687);r.Z=function(e){var r=e.text,t=e.onClick,a=e.width;return(0,n.jsx)("button",{onClick:t,style:{width:a},className:"allCenter blueButton",children:r})}},4806:function(e,r,t){"use strict";t.r(r),t.d(r,{default:function(){return Z}});var n=t(2010),a=t(3172),i=t(7543),o=t(9884),u=t.n(o),c=t(6687),l=t(637),s=t(6373),p=t(614),d=t.n(p),f=t(8370),m=t(681);function h(e,r){(null==r||r>e.length)&&(r=e.length);for(var t=0,n=new Array(r);t<r;t++)n[t]=e[t];return n}function y(e,r,t,n,a,i,o){try{var u=e[i](o),c=u.value}catch(l){return void t(l)}u.done?r(c):Promise.resolve(c).then(n,a)}function b(e,r,t){return r in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}function v(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{},n=Object.keys(t);"function"===typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(t).filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})))),n.forEach((function(r){b(e,r,t[r])}))}return e}function j(e,r){return r=null!=r?r:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):function(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,n)}return t}(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})),e}function g(e,r){return function(e){if(Array.isArray(e))return e}(e)||function(e,r){var t=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=t){var n,a,i=[],o=!0,u=!1;try{for(t=t.call(e);!(o=(n=t.next()).done)&&(i.push(n.value),!r||i.length!==r);o=!0);}catch(c){u=!0,a=c}finally{try{o||null==t.return||t.return()}finally{if(u)throw a}}return i}}(e,r)||function(e,r){if(!e)return;if("string"===typeof e)return h(e,r);var t=Object.prototype.toString.call(e).slice(8,-1);"Object"===t&&e.constructor&&(t=e.constructor.name);if("Map"===t||"Set"===t)return Array.from(t);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return h(e,r)}(e,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function x(e,r){return r||(r=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(r)}}))}function O(){var e=x(["\n  mutation UploadScore(\n    $score: Int!\n    $article: String!\n    $username: String!\n    $type: String!\n    $date: String!\n    $uploader: String!\n    $detail: String\n  ) {\n    UploadScore(\n      score: $score\n      article: $article\n      username: $username\n      type: $type\n      date: $date\n      uploader: $uploader\n      detail: $detail\n    )\n  }\n"]);return O=function(){return e},e}function w(){var e=x(["\n  query searchUserAndMe($term: String!) {\n    searchUser(term: $term) {\n      id\n      username\n      avatar\n      type\n      scores {\n        score\n        article\n        date\n        type\n        uploader\n      }\n    }\n    me {\n      username\n      avatar\n      type\n      email\n      scores {\n        score\n        article\n        date\n        type\n        uploader\n      }\n    }\n  }\n"]);return w=function(){return e},e}var S=(0,s.gql)(O()),P=(0,s.gql)(w());function $(){var e,r,t=(0,f.cI)(),a=t.register,i=t.handleSubmit,o=t.setValue,s=t.watch,p=(0,c.useState)(!1),h=p[0],b=p[1],x=g((0,l.useMutation)(S),1)[0],O=(0,l.useQuery)(P,{variables:{term:s("term")}}),w=O.data,$=O.loading,N=O.refetch,U=function(){var e,r=(e=u().mark((function e(r){var t,n,a,i,o,c,l;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=r.score,n=r.article,a=r.term,i=r.date,o=r.uploader,c=r.detail,e.prev=1,e.next=4,x({variables:{score:+t,article:n,username:a,type:"Demerit",date:i,uploader:o,detail:c}});case 4:e.sent.data.UploadScore&&m.Am.success("\uc785\ub825\uc774 \uc644\ub8cc\ub418\uc5c8\uc2b5\ub2c8\ub2e4!"),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(1),l=e.t0.message.replace("GraphQL","").replace("error","").replace(":",""),m.Am.error(l);case 13:return e.prev=13,b(!1),e.finish(13);case 16:case"end":return e.stop()}}),e,null,[[1,9,13,16]])})),function(){var r=this,t=arguments;return new Promise((function(n,a){var i=e.apply(r,t);function o(e){y(i,n,a,o,u,"next",e)}function u(e){y(i,n,a,o,u,"throw",e)}o(void 0)}))});return function(e){return r.apply(this,arguments)}}();return(0,n.jsxs)("div",{className:"container px-40",children:[(0,n.jsx)("h1",{className:"title",children:"\ubc8c\uc810 \uc785\ub825"}),(0,n.jsx)("div",{className:"formContainer",children:(0,n.jsxs)("form",{onSubmit:i(U),children:[(0,n.jsx)("input",v({className:"input",placeholder:"\uc785\ub825\uc790"},a("uploader",{required:!0}))),(0,n.jsx)("input",v({className:"input",placeholder:"Date",type:"datetime-local"},a("date",{required:!0}))),(0,n.jsx)("input",j(v({className:"input",placeholder:"\ubc1b\ub294\uc0ac\ub78c"},a("term",{required:!0})),{onKeyPress:function(){return N()}})),0!==(null===w||void 0===w||null===(e=w.searchUser)||void 0===e?void 0:e.length)&&(0,n.jsx)("div",{className:"labelContainer",children:$?(0,n.jsx)(d(),{type:"TailSpin",color:"#00BFFF",height:20,width:20,timeout:5e3}):(0,n.jsx)(n.Fragment,{children:0!==(null===w||void 0===w||null===(r=w.searchUser)||void 0===r?void 0:r.length)?w.searchUser.map((function(e){return(0,n.jsxs)("label",{className:"label",children:[(0,n.jsx)("input",{type:"radio",name:"Student",value:e.username,style:{width:"1rem"},onClick:function(){return o("term",e.username)}},e.id),e.username]},e.id)})):""!==term.value&&(0,n.jsx)("h1",{children:"User not Found"})})}),(0,n.jsx)("input",v({className:"input",placeholder:"\uc194\ub85c\ubaac \uc870\ud56d"},a("article",{required:!0}))),(0,n.jsx)("input",j(v({className:"input",placeholder:"\uc810\uc218"},a("score",{required:!0})),{type:"number"})),(0,n.jsx)("input",j(v({className:"input",placeholder:"\ube44\uace0"},a("detail",{required:!1})),{type:"text"})),h?(0,n.jsx)("button",{className:"blueButton",children:(0,n.jsx)(d(),{type:"TailSpin",color:"white",height:16,width:16,timeout:5e3})}):(0,n.jsx)("button",{className:"blueButton",children:"Submit"})]})})]})}var N=t(1892);function U(e,r){(null==r||r>e.length)&&(r=e.length);for(var t=0,n=new Array(r);t<r;t++)n[t]=e[t];return n}function A(e,r,t,n,a,i,o){try{var u=e[i](o),c=u.value}catch(l){return void t(l)}u.done?r(c):Promise.resolve(c).then(n,a)}function k(e,r,t){return r in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}function q(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{},n=Object.keys(t);"function"===typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(t).filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})))),n.forEach((function(r){k(e,r,t[r])}))}return e}function C(e,r){return r=null!=r?r:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):function(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,n)}return t}(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})),e}function D(e,r){return function(e){if(Array.isArray(e))return e}(e)||function(e,r){var t=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=t){var n,a,i=[],o=!0,u=!1;try{for(t=t.call(e);!(o=(n=t.next()).done)&&(i.push(n.value),!r||i.length!==r);o=!0);}catch(c){u=!0,a=c}finally{try{o||null==t.return||t.return()}finally{if(u)throw a}}return i}}(e,r)||function(e,r){if(!e)return;if("string"===typeof e)return U(e,r);var t=Object.prototype.toString.call(e).slice(8,-1);"Object"===t&&e.constructor&&(t=e.constructor.name);if("Map"===t||"Set"===t)return Array.from(t);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return U(e,r)}(e,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function E(e,r){return r||(r=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(r)}}))}function _(){var e=E(["\n  mutation UploadScore(\n    $score: Int!\n    $article: String!\n    $username: String!\n    $type: String!\n    $date: String!\n    $uploader: String!\n  ) {\n    UploadScore(\n      score: $score\n      article: $article\n      username: $username\n      type: $type\n      date: $date\n      uploader: $uploader\n    )\n  }\n"]);return _=function(){return e},e}function F(){var e=E(["\n  query searchUserAndMe($term: String!) {\n    searchUser(term: $term) {\n      id\n      username\n      avatar\n      type\n      scores {\n        score\n        article\n        date\n        type\n        uploader\n      }\n    }\n    me {\n      username\n      avatar\n      type\n      email\n      scores {\n        score\n        article\n        date\n        type\n        uploader\n      }\n    }\n  }\n"]);return F=function(){return e},e}var I=(0,s.gql)(_()),T=(0,s.gql)(F());function M(){var e,r=(0,f.cI)(),t=r.register,a=r.handleSubmit,i=r.setValue,o=r.watch,s=(0,c.useState)(!1),p=s[0],h=s[1],y=D((0,l.useMutation)(I),1)[0],b=(0,l.useQuery)(T,{variables:{term:o("term")}}),v=b.data,j=b.loading,g=b.refetch,x=function(){var e,r=(e=u().mark((function e(r){var t,n,a,i,o,c;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=r.uploader,n=r.term,a=r.reason,i=r.score,o=r.date,e.prev=1,h(!0),j){e.next=6;break}if("Admin"===v.me.type){e.next=6;break}throw Error("You Can't");case 6:return e.next=8,y({variables:{score:+i,article:a,username:n,type:"Merit",date:o,uploader:t}});case 8:e.sent.data.UploadScore&&m.Am.success("\uc785\ub825\uc774 \uc644\ub8cc\ub418\uc5c8\uc2b5\ub2c8\ub2e4!"),e.next=17;break;case 13:e.prev=13,e.t0=e.catch(1),c=e.t0.message.replace("GraphQL","").replace("error","").replace(":",""),m.Am.error(c);case 17:return e.prev=17,h(!1),e.finish(17);case 20:case"end":return e.stop()}}),e,null,[[1,13,17,20]])})),function(){var r=this,t=arguments;return new Promise((function(n,a){var i=e.apply(r,t);function o(e){A(i,n,a,o,u,"next",e)}function u(e){A(i,n,a,o,u,"throw",e)}o(void 0)}))});return function(e){return r.apply(this,arguments)}}();return(0,n.jsxs)("div",{className:"container px-40",children:[(0,n.jsx)("h1",{className:"title",children:"\uc0c1\uc810 \uc785\ub825"}),(0,n.jsx)("div",{className:"formContainer",children:(0,n.jsxs)("form",{onSubmit:a(x),children:[(0,n.jsx)("input",q({className:"input",placeholder:"\uc785\ub825\uc790"},t("uploader",{required:!0}))),(0,n.jsx)("input",q({className:"input",placeholder:"Date",type:"datetime-local"},t("date",{required:!0}))),(0,n.jsx)("input",C(q({className:"input",placeholder:"\ubc1b\ub294\uc0ac\ub78c"},t("term",{required:!0})),{onKeyPress:function(){return g()}})),0!==(null===v||void 0===v||null===(e=v.searchUser)||void 0===e?void 0:e.length)&&(0,n.jsx)("div",{className:"labelContainer",children:j?(0,n.jsx)(d(),{type:"TailSpin",color:"#00BFFF",height:20,width:20,timeout:5e3}):(0,n.jsx)(n.Fragment,{children:0!==v.searchUser.length?v.searchUser.map((function(e){return(0,n.jsxs)("label",{className:"label",children:[(0,n.jsx)("input",{type:"radio",name:"Student",value:e.username,style:{width:"1rem"},onClick:function(){return i("term",e.username)}},e.id),e.username]},e.id)})):""!==term.value&&(0,n.jsx)("h1",{children:"User not Found"})})}),(0,n.jsx)("input",q({className:"input",placeholder:"\uc0ac\uc720"},t("reason",{required:!0}))),(0,n.jsx)("input",q({className:"input",placeholder:"\uc810\uc218",type:"number"},t("score",{required:!0}))),p?(0,n.jsx)(N.Z,{text:(0,n.jsx)(d(),{type:"TailSpin",color:"white",height:16,width:16,timeout:5e3})}):(0,n.jsx)(N.Z,{text:"Submit"})]})})]})}var Z=function(){return(0,n.jsx)("div",{className:"container",children:(0,n.jsxs)(a.Z,{autoPlay:!1,animation:"slide",children:[(0,n.jsx)(i.Z,{children:(0,n.jsx)(M,{})}),(0,n.jsx)(i.Z,{children:(0,n.jsx)($,{})})]})})}}},function(e){e.O(0,[370,614,13,172,774,888,179],(function(){return r=2942,e(e.s=r);var r}));var r=e.O();_N_E=r}]);